yGot it â€” youâ€™ve been asked to monitor LSF (Load Sharing Facility) and user jobs, particularly from the design team, during and after a compute switch upgrade. The goal is to ensure that:

LSF is healthy before and after the upgrade.

Thereâ€™s no job failure or user-side impact.

The system returns to the same state post-upgrade.


Hereâ€™s a structured plan you can follow to monitor and verify:


---

âœ… Before Upgrade: Capture Baseline

1. LSF System Health

Run the following:

lsid          # Check LSF master status
bhosts        # Check host status (up/down)
lsload        # Check load on all hosts

Optional:

badmin mbdrestart    # (Only if admin check is needed)

2. Active Job Summary

Capture jobs submitted by design users:

bjobs -u all | grep designusername > jobs_before.txt

Or if users are in a specific group:

bjobs -u all | grep -E 'designuser1|designuser2|...' > jobs_before.txt

Get job stats:

bjobs -u all | awk '{print $3}' | sort | uniq -c   # Count per user

Optional:

bqueues                # To see queue statuses


---

ðŸ”„ During Upgrade: Monitor Continuously

Keep an eye on:

bhosts                 # Check if any hosts go down
bjobs -u all           # Check if any jobs are pending/suspended unexpectedly

Use:

watch -n 60 "bhosts; bjobs -u all | grep design"


---

âœ… After Upgrade: Validate and Compare

1. LSF System Recheck

lsid
bhosts
lsload

Look for:

No DOWN/UNLICENSED hosts.

Normal load levels.

Daemons responding normally.


2. Job Comparison

Re-run job status:

bjobs -u all | grep designusername > jobs_after.txt

Then compare:

diff jobs_before.txt jobs_after.txt

Look for:

No abnormal job terminations.

Jobs resumed or continued as expected.

Same job counts or expected progression.



---

ðŸ§¾ Optional Validation (for extra confidence)

Check LSF logs: Look in /var/log/lsf or your configured path for errors/warnings.

LSF Admin tools:

badmin ckconfig

Speak to users: Ask a design user to confirm jobs are running normally.



---

âœ… Summary Report You Can Send Back

Hereâ€™s a quick template:


---

Post-Upgrade Validation Report

LSF Master (lsid): âœ… OK

All Hosts (bhosts): âœ… No hosts down

Job Status: âœ… No jobs failed or abnormally terminated

Design User Jobs: âœ… Matching state before/after (see attached diff)

Overall Impact: âœ… No user impact observed



---

Let me know if you'd like help scripting this into a reusable monitoring tool or preparing logs/reporting format.

