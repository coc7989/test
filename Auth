import { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';

const App = () => {
  const [authorized, setAuthorized] = useState(null); // Initially set to null
  const navigate = useNavigate();

  useEffect(() => {
    // Fetch authorization status from backend
    const fetchAuthorization = async () => {
      // Example fetch logic
      const response = await fetch('/api/checkAuthorization');
      const data = await response.json();
      setAuthorized(data.authorized);
    };

    fetchAuthorization();
  }, []);

  // Navigate based on authorization status once fetched
  useEffect(() => {
    if (authorized === null) return; // Wait until authorization status is fetched
    if (!authorized) {
      navigate('/unauthorised');
    }
  }, [authorized, navigate]);

  // Optionally, show a loading indicator while fetching
  if (authorized === null) {
    return <div>Loading...</div>;
  }

  // Once authorization status is fetched, return your app content
  return (
    <div>
      {/* Your app content */}
    </div>
  );
};

export default App;
