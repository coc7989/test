import React, { useState, useEffect } from 'react';
import { DataTable } from 'primereact/datatable';
import { Column } from 'primereact/column';

const MyDataGrid = () => {
  const [rowData, setRowData] = useState([]);

  useEffect(() => {
    fetch('/api/data')
      .then(response => response.json())
      .then(data => setRowData(data));
  }, []);

  const generateRowSpanData = (data) => {
    // Function to generate rowspan data
    // Modify your data structure to include rowspan info
    // Example: { value: 'A', rowspan: 2 }, { value: 'B', rowspan: null }
    // This will make 'A' span 2 rows
    // You need to implement this based on your actual data structure
    return modifiedData;
  };

  const modifiedRowData = generateRowSpanData(rowData);

  const renderCell = (rowData, column) => {
    if (rowData[column.field] === null) {
      return null; // For cells that should span multiple rows, return null
    } else {
      return rowData[column.field]; // For regular cells, return the value
    }
  };

  const rowSpanBodyTemplate = (rowData, column) => {
    const value = renderCell(rowData, column);
    if (value === null) {
      return null; // Return null for cells that should span multiple rows
    } else {
      return <td rowSpan={rowData.rowspan}>{value}</td>; // Set rowSpan attribute for regular cells
    }
  };

  return (
    <DataTable value={modifiedRowData}>
      <Column body={rowSpanBodyTemplate} />
      <Column field="columnName1" header="Column Header 1" />
      <Column field="columnName2" header="Column Header 2" />
      {/* Add more columns as needed */}
    </DataTable>
  );
};

export default MyDataGrid;
