import { useState, useEffect } from 'react';
import { useNavigate, useLocation } from 'react-router-dom';

const App = () => {
  const [authorized, setAuthorized] = useState(false);
  const navigate = useNavigate();
  const location = useLocation();

  useEffect(() => {
    // Fetch authorization status from backend
    const fetchAuthorization = async () => {
      // Example fetch logic
      const response = await fetch('/api/checkAuthorization');
      const data = await response.json();
      setAuthorized(data.authorized);
    };

    fetchAuthorization();
  }, []);

  useEffect(() => {
    // Navigate based on authorization status
    if (authorized && location.pathname !== '/authorized-page') {
      navigate('/authorized-page');
    } else if (!authorized) {
      navigate('/unauthorised');
    }
  }, [authorized, navigate, location]);

  return (
    <div>
      {/* Your app content */}
    </div>
  );
};

export default App;
